<Window x:Class="ASD.CellUniverse.Shell"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:c="clr-namespace:ASD.CellUniverse.Resources.Controls;assembly=ASD.CellUniverse.Resources"
        xmlns:vm="clr-namespace:ASD.CellUniverse.ViewModels"
        xmlns:app="clr-namespace:ASD.CellUniverse.Infrastructure.BindingExtensions;assembly=ASD.CellUniverse.Infrastructure"
        Title="{Binding Title}"
        WindowState="{app:Settings ShellState}"
        Width="{app:Settings ShellWidth}"
        Height="{app:Settings ShellHeight}"
        Left="{app:Settings ShellLeft}"
        Top="{app:Settings ShellTop}">
    <Window.DataContext>
        <vm:ShellViewModel/>
    </Window.DataContext>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <Border
            Grid.Column="0"
            Background="#FF000000">
            <c:MatrixLED
                IntencitySource="{Binding IntencityData}"
                Foreground="{StaticResource RainbowBrush}"
                GridBrush="#0AFFFFFF"/>
        </Border>
        <Grid
            Grid.Column="1"
            MinWidth="{StaticResource RightPanelMinWidth}">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <StackPanel
                Grid.Row="0">
                <GroupBox
                    Header="Matrix Mutator:"
                    Margin="{StaticResource UpControlsMargin}"
                    Padding="{StaticResource SingleControlPaddind}">
                    <ComboBox
                        ItemsSource="{Binding Mutators}"
                        SelectedIndex="{Binding MutatorSelectedIndex}"/>
                </GroupBox>
                <GroupBox
                    Header="Speed:"
                    Margin="{StaticResource UpControlsMargin}"
                    Padding="{StaticResource SingleControlPaddind}">
                    <c:FormattedSlider
                        Grid.Row="1"
                        Minimum="{Binding SequenceGenerator.MinFPS}"
                        Maximum="{Binding SequenceGenerator.MaxFPS}"
                        Value="{Binding SequenceGenerator.FPS}"
                        Ticks="{Binding SequenceGenerator.FPSCollection}"
                        IsSnapToTickEnabled="True"                        
                        AutoToolTipPlacement="BottomRight"
                        AutoToolTipFormat="{}{0} FPS"/>
                </GroupBox>
                <GroupBox
                    Header="Matrix Resolution:"
                    Margin="{StaticResource UpControlsMargin}"
                    Padding="{StaticResource SingleControlPaddind}">
                    <Grid
                        IsEnabled="{Binding CanResolutionChange}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <c:AcceptableTextBox
                            Grid.Column="0"
                            Text="320"/>
                        <TextBlock
                            Grid.Row="1"
                            Grid.Column="1"
                            Text="x"
                            Margin="8,1,8,0"
                            Foreground="{DynamicResource
                            {x:Static SystemColors.GrayTextBrushKey}}"/>
                        <c:AcceptableTextBox
                            Grid.Row="1"
                            Grid.Column="2"
                            Text="200"/>
                    </Grid>
                </GroupBox>

            </StackPanel>
            <StackPanel
                Grid.Row="1">
                <Button
                    Content="{Binding Controller.Start}"
                    Command="{Binding Controller.Start}"/>
                <Button
                    Content="{Binding Controller.Stop}"
                    Command="{Binding Controller.Stop}"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>